{
  "version": 3,
  "sources": ["../../../../../packages/components/config-provider/src/constants.ts", "../../../../../packages/components/config-provider/src/hooks/use-global-config.ts", "../../../../../packages/components/config-provider/src/config-provider-props.ts", "../../../../../packages/components/config-provider/src/config-provider.ts", "../../../../../packages/components/config-provider/index.ts"],
  "sourcesContent": ["import type { ConfigProviderProps } from './config-provider-props'\nimport type { InjectionKey, Ref } from 'vue'\n\nexport type ConfigProviderContext = Partial<ConfigProviderProps>\n\nexport const configProviderContextKey: InjectionKey<\n  Ref<ConfigProviderContext>\n> = Symbol()\n", "import { computed, getCurrentInstance, inject, provide, ref, unref } from 'vue'\nimport { debugWarn, keysOf } from '@element-plus/utils'\nimport {\n  SIZE_INJECTION_KEY,\n  defaultInitialZIndex,\n  defaultNamespace,\n  localeContextKey,\n  namespaceContextKey,\n  useLocale,\n  useNamespace,\n  useZIndex,\n  zIndexContextKey,\n} from '@element-plus/hooks'\nimport { configProviderContextKey } from '../constants'\n\nimport type { MaybeRef } from '@vueuse/core'\nimport type { App, Ref } from 'vue'\nimport type { ConfigProviderContext } from '../constants'\n\n// this is meant to fix global methods like `ElMessage(opts)`, this way we can inject current locale\n// into the component as default injection value.\n// refer to: https://github.com/element-plus/element-plus/issues/2610#issuecomment-887965266\nconst globalConfig = ref<ConfigProviderContext>()\n\nexport function useGlobalConfig<\n  K extends keyof ConfigProviderContext,\n  D extends ConfigProviderContext[K]\n>(\n  key: K,\n  defaultValue?: D\n): Ref<Exclude<ConfigProviderContext[K], undefined> | D>\nexport function useGlobalConfig(): Ref<ConfigProviderContext>\nexport function useGlobalConfig(\n  key?: keyof ConfigProviderContext,\n  defaultValue = undefined\n) {\n  const config = getCurrentInstance()\n    ? inject(configProviderContextKey, globalConfig)\n    : globalConfig\n  if (key) {\n    return computed(() => config.value?.[key] ?? defaultValue)\n  } else {\n    return config\n  }\n}\n\n// for components like `ElMessage` `ElNotification` `ElMessageBox`.\nexport function useGlobalComponentSettings(\n  block: string,\n  sizeFallback?: MaybeRef<ConfigProviderContext['size']>\n) {\n  const config = useGlobalConfig()\n\n  const ns = useNamespace(\n    block,\n    computed(() => config.value?.namespace || defaultNamespace)\n  )\n\n  const locale = useLocale(computed(() => config.value?.locale))\n  const zIndex = useZIndex(\n    computed(() => config.value?.zIndex || defaultInitialZIndex)\n  )\n  const size = computed(() => unref(sizeFallback) || config.value?.size || '')\n  provideGlobalConfig(computed(() => unref(config) || {}))\n\n  return {\n    ns,\n    locale,\n    zIndex,\n    size,\n  }\n}\n\nexport const provideGlobalConfig = (\n  config: MaybeRef<ConfigProviderContext>,\n  app?: App,\n  global = false\n) => {\n  const inSetup = !!getCurrentInstance()\n  const oldConfig = inSetup ? useGlobalConfig() : undefined\n\n  const provideFn = app?.provide ?? (inSetup ? provide : undefined)\n  if (!provideFn) {\n    debugWarn(\n      'provideGlobalConfig',\n      'provideGlobalConfig() can only be used inside setup().'\n    )\n    return\n  }\n\n  const context = computed(() => {\n    const cfg = unref(config)\n    if (!oldConfig?.value) return cfg\n    return mergeConfig(oldConfig.value, cfg)\n  })\n  provideFn(configProviderContextKey, context)\n  provideFn(\n    localeContextKey,\n    computed(() => context.value.locale)\n  )\n  provideFn(\n    namespaceContextKey,\n    computed(() => context.value.namespace)\n  )\n  provideFn(\n    zIndexContextKey,\n    computed(() => context.value.zIndex)\n  )\n\n  provideFn(SIZE_INJECTION_KEY, {\n    size: computed(() => context.value.size || ''),\n  })\n\n  if (global || !globalConfig.value) {\n    globalConfig.value = context.value\n  }\n  return context\n}\n\nconst mergeConfig = (\n  a: ConfigProviderContext,\n  b: ConfigProviderContext\n): ConfigProviderContext => {\n  const keys = [...new Set([...keysOf(a), ...keysOf(b)])]\n  const obj: Record<string, any> = {}\n  for (const key of keys) {\n    obj[key] = b[key] ?? a[key]\n  }\n  return obj\n}\n", "import { buildProps, definePropType } from '@element-plus/utils'\nimport { useSizeProp } from '@element-plus/hooks'\n\nimport type { ExtractPropTypes } from 'vue'\nimport type { Language } from '@element-plus/locale'\nimport type { ButtonConfigContext } from '@element-plus/components/button'\nimport type { MessageConfigContext } from '@element-plus/components/message'\n\nexport type ExperimentalFeatures = {\n  // TO BE Defined\n}\n\nexport const configProviderProps = buildProps({\n  /**\n   * @description Controlling if the users want a11y features\n   */\n  a11y: {\n    type: Boolean,\n    default: true,\n  },\n  /**\n   * @description Locale Object\n   */\n  locale: {\n    type: definePropType<Language>(Object),\n  },\n  /**\n   * @description global component size\n   */\n  size: useSizeProp,\n  /**\n   * @description button related configuration, [see the following table](#button-attributes)\n   */\n  button: {\n    type: definePropType<ButtonConfigContext>(Object),\n  },\n  /**\n   * @description features at experimental stage to be added, all features are default to be set to false                                                                                | ^[object]\n   */\n  experimentalFeatures: {\n    type: definePropType<ExperimentalFeatures>(Object),\n  },\n  /**\n   * @description Controls if we should handle keyboard navigation\n   */\n  keyboardNavigation: {\n    type: Boolean,\n    default: true,\n  },\n  /**\n   * @description message related configuration, [see the following table](#message-attributes)\n   */\n  message: {\n    type: definePropType<MessageConfigContext>(Object),\n  },\n  /**\n   * @description global Initial zIndex\n   */\n  zIndex: Number,\n  /**\n   * @description global component className prefix (cooperated with [$namespace](https://github.com/element-plus/element-plus/blob/dev/packages/theme-chalk/src/mixins/config.scss#L1)) | ^[string]\n   */\n  namespace: {\n    type: String,\n    default: 'el',\n  },\n} as const)\nexport type ConfigProviderProps = ExtractPropTypes<typeof configProviderProps>\n", "import { defineComponent, renderSlot, watch } from 'vue'\nimport { provideGlobalConfig } from './hooks/use-global-config'\nimport { configProviderProps } from './config-provider-props'\n\nimport type { MessageConfigContext } from '@element-plus/components/message'\n\nexport const messageConfig: MessageConfigContext = {}\n\nconst ConfigProvider = defineComponent({\n  name: 'ElConfigProvider',\n  props: configProviderProps,\n\n  setup(props, { slots }) {\n    watch(\n      () => props.message,\n      (val) => {\n        Object.assign(messageConfig, val ?? {})\n      },\n      { immediate: true, deep: true }\n    )\n    const config = provideGlobalConfig(props)\n    return () => renderSlot(slots, 'default', { config: config?.value })\n  },\n})\nexport type ConfigProviderInstance = InstanceType<typeof ConfigProvider>\n\nexport default ConfigProvider\n", "import { withInstall } from '@element-plus/utils'\n\nimport ConfigProvider from './src/config-provider'\n\nexport const ElConfigProvider = withInstall(ConfigProvider)\nexport default ElConfigProvider\n\nexport * from './src/config-provider'\nexport * from './src/config-provider-props'\nexport * from './src/constants'\nexport * from './src/hooks/use-global-config'\n"],
  "mappings": "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",
  "names": []
}
